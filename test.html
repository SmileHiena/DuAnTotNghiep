+------------------+                          +------------------------+                                                                                 +------------------+                                               +-------------------------+                                         +-------------------------------+
|    Người dùng    |                          |       Frontend         |                                                                                 |  Backend (API)   |                                               |     VNPAY (Thanh toán)  |                                         |    Trang chi tiết hoá đơn     |
+------------------+                          +------------------------+                                                                                 +------------------+                                               +-------------------------+                                         +-------------------------------+
        |                                                   |                                                                                                       |                                                                      |                                                                 |
        |---(1) Truy cập trang thanh toán ----------------->|                                                                                                       |                                                                      |                                                                 |
        |                                                   |-=--(2) Gửi yêu cầu lấy thông tin thanh toán (GET /checkout) ----------------------------------------->|                                                                      |                                                                 |
        |                                                   |                                                                                                       |<------------(3) API trả về thông tin thanh toán ---------------      |                                                                 |
        |                                                   |                                                                                                       |                                                                      |                                                                 |
        |                                                   |---(4) Lấy thông tin cá nhân từ cookie (tên, email, số điện thoại, địa chỉ) -------------------------->|                                                                      |                                                                 |
        |                                                   |---(5) Lấy thông tin vé: phim, thời gian chiếu, phòng, số vé, loại vé, số ghế, combo ----------------->|                                                                      |                                                                 |
        |                                                   |                                                                                                       |                                                                      |                                                                 |
        |                                                   |<---(6) Hiển thị thông tin checkout (Thông tin cá nhân + Vé) trên giao diện người dùng ----------------|                                                                      |                                                                 |
        |                                                   |                                                                                                       |                                                                      |                                                                 |
        |                                                   |---(7) Người dùng chọn phương thức thanh toán (VNPAY) -------------------------------------------------|                                                                      |                                                                 |
        |                                                   |                                                                                                       |                                                                      |                                                                 |
        |---(8) Người dùng xác nhận thanh toán------------->|                                                                                                       |                                                                      |                                                                 |
        |                                                   |---(9) Gửi yêu cầu thanh toán (POST /order/create_payment_url) --------------------------------------->|                                                                      |                                                                 |
        |                                                   |                                                                                                       |                                                                      |                                                                 |
        |                                                   |                                                                                                       |<---(10) API trả về URL chuyển hướng đến trang VNPAY -----------      |                                                                 |
        |                                                   |<---(11) Chuyển hướng người dùng đến trang thanh toán VNPAY ------------------------------------------>|                                                                      |                                                                 |
        |                                                   |                                                                                                       |                                                                      |                                                                 |
        |                                                   |                                                                                                       |                                                                      |                                                                 |
        |                                                   |                                                                                                       |                                                                      |                                                                 |
        |                                                   |                                                                                                       |                                                                      |                                                                 |
        |                                                   |                                                                                                       |                                                                      |                                                                 |
        |                                                   |                                                                                                       |                                                                      |                                                                 |
        |                                                   |                                                                                                       |<---(12) Người dùng hoàn tất thanh toán và quay lại trang kết quả-----|                                                                 |
        |                                                   |                                                                                                       |                                                                      |                                                                 |
        |                                                   |---(13) Gửi yêu cầu kiểm tra kết quả thanh toán (POST /checkout) ------------------------------------->|                                                                      |                                                                 |
        |                                                   |                                                                                                       |                                                                      |                                                                 |
        |                                                   |                                                                                                       |<---(14) API trả về kết quả thanh toán (thành công/không thành công)--|                                                                 |
        |                                                   |<---(15) Hiển thị thông báo thanh toán thành công -----------------------------------------------------|<---(16) Hiển thị Toast: "Thanh toán thành công!"---------------------|                                                                 |
        |                                                   |<---(17) Nếu không thành công, hiển thị thông báo lỗi -------------------------------------------------|<---(18) Hiển thị Toast: "Thanh toán không thành công!"---------------|                                                                 |
        |                                                   |                                                                                                       |                                                                      |                                                                 |
        |                                                   |---(19) Chuyển hướng đến trang chi tiết hóa đơn ------------------------------------------------------>|                                                                      |                                                                 |
        |                                                   |                                                                                                       |                                                                      |<---(20) API trả về chi tiết hóa đơn ----------------------------|
        |                                                   |                                                                                                       |                                                                      |<---(21) Hiển thị thông tin chi tiết hóa đơn trên trang ---------|
--------|---------------------------------------------------|-------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------|-----------------------------------------------------------------|
